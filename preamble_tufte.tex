\documentclass[a4paper,justified]{tufte-book}

% Babel language package
% \usepackage[english,greek]{babel}
% \usepackage[utf8]{inputenc}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%
\usepackage{fontspec}
\usepackage{libertine}
%%%%%%%%%%%%%%%%%%%%
\usepackage[shrink=10,stretch=10]{microtype} 
%%%%%%%% math packages%%%%%%%%%%%%
\usepackage[intlimits]{amsmath}
\usepackage{amssymb, amsbsy}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{mathtools}
\usepackage{proof}
\usepackage{empheq}
\usepackage{latexsym}
\usepackage{mathrsfs}
\usepackage{proof}
\usepackage[italicdiff]{physics}
\usepackage[detect-all]{siunitx}
%%%%%%%%%%%%%%%%%%%%


%%%%% math packages %%%%%%%%%%%%%%%%%%



%%%%%% graphics %%%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}
\usepackage[dvipsnames]{xcolor}
\usepackage{multicol}
\usepackage{tikz}
%\usepackage{xypic}
%\usepackage[all]{xy}
%\usepackage{calc}

%%%%%% tables %%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{array}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{minibox}
\usepackage{systeme}
\usepackage{cite} 
\usepackage{extarrows} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{enumerate}
\usepackage[shortlabels,inline]{enumitem}
\usepackage{fancyhdr}
%%%%% header and footer rule %%%%%%%%%
\setlength{\headheight}{14pt}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancypagestyle{plain}{\fancyhf{}
\fancyhead{}
\lfoot{\small \hrule \vspace{5pt}\color{magenta} Βαγγέλης Σαπουνάκης}
\cfoot{\small \hrule \vspace{5pt}\color{blue!75} Φοιτητικό Πρόσημο}
\rfoot{\small \hrule \vspace{5pt} \thepage}}
\fancypagestyle{vangelis}{\fancyhf{}
\rhead{\small }
\lhead{\small }
\lfoot{\small \hrule \vspace{5pt}\color{magenta} Βαγγέλης Σαπουνάκης}
\cfoot{\small \hrule \vspace{5pt}\color{blue!75} Φοιτητικό Πρόσημο}
\rfoot{\small \hrule \vspace{5pt} \thepage}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{hyperref}
%\usepackage{url}
%%%%%%%% hyperref settings %%%%%%%%%%%%
%\hypersetup{pdfpagemode=UseOutlines,hidelinks,
%bookmarksopen=true,
%pdfdisplaydoctitle=true,
%pdfstartview=Fit,
%unicode=true,
%pdfpagelayout=OneColumn,
%}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% \usepackage{geometry}
% \geometry{left=25.63mm,right=25.63mm,top=36.25mm,bottom=36.25mm,footskip=24.16mm,headsep=24.16mm}

\usepackage{titlesec}
%%%%%% titlesec settings %%%%%%%%%%%%%
%\titleformat{\chapter}[block]{\LARGE\sc\bfseries}{\thechapter.}{1ex}{#1}
%\titlespacing*{\chapter}{0cm}{0cm}{36pt}[0ex]
%\titleformat{\section}[block]{\Large\bfseries}{\thesection.}{1ex}{#1}
%\titlespacing*{\section}{0cm}{34.56pt}{17.28pt}[0ex]
%\titleformat{\subsection}[block]{\large\bfseries{\thesubsection.}{1ex}{#1}
%\titlespacing*{\subsection}{0pt}{28.80pt}{14.40pt}[0ex]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%% My Theorems %%%%%%%%%%%%%%%%%%
\newtheorem{thm}{Θεώρημα}[]
\newtheorem{cor}[thm]{Πόρισμα}
\newtheorem{lem}[thm]{Λήμμα}
\newtheorem{prop}[thm]{Πρόταση}
\theoremstyle{definition}
\newtheorem{dfn}{Ορισμός}[]
\newtheorem{dfns}[dfn]{Ορισμοί}
\newtheorem{exam}[thm]{Παράδειγμα}
\newtheorem{exams}[thm]{Παραδείγματα}
\theoremstyle{remark}
\newtheorem{rem}{Παρατήρηση}[]
\newtheorem{rems}[rem]{Παρατηρήσεις}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheoremstyle{break}
{\topsep}{\topsep}%
{\itshape}{}%
{\bfseries}{}%
{\newline}{}%

\theoremstyle{break}
\newtheorem{thmbreak}{Θεώρημα}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%Watermark%%%%%%%%%%%%%%%%%%
% \usepackage[printwatermark]{xwatermark} 

% \newwatermark[allpages,color=blue!8,angle=45,scale=3,xpos=0,ypos=0]{ΠΡΟΣΗΜΟ}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%defines \inlineequation[<label name>]{<equation>}
%%%%% label inline equations and allow reference
\makeatletter
\newcommand*{\inlineequation}[2][]{%
	\begingroup
    % Put \refstepcounter at the beginning, because
	% package `hyperref' sets the anchor here.
	 \refstepcounter{equation}%
	\ifx\\#1\\%
\else
	 \label{#1}%
 \fi
 % prevent line breaks inside equation
 \relpenalty=10000 %
 \binoppenalty=10000 %
 \ensuremath{%
	 % \displaystyle % larger fractions, ...
	 #2%
 }%
 ~\@eqnnum
 \endgroup
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%\mybrace{<first>}{<second>}[<Optional text>]
%%% wrap with braces list environments
\NewDocumentCommand\mybrace{mmo}{%
\IfValueTF {#3}{%
\begin{tikzpicture}[overlay, remember picture,decoration={brace,amplitude=1ex}]
	ack] (#1.north east) -- (#2.south east) node[midway, right=0.1cm]
	{$\Rightarrow$}node[midway, right=0.5cm,text=black,text width = 2in,] {{#3}};
	\end{tikzpicture}%
}%
{%
	\begin{tikzpicture}[overlay, remember
		picture,decoration={brace,amplitude=1ex}]
		ack] (#1.north east) -- (#2.south east);
		\end{tikzpicture}%
	}%
}%a
%%%%%%%How to use this %%%%%%%%%%%%%%%%%%%%%%%%%
%use \tikzmark{a} and \tikzmark{b} at first and last \item where the brace is
%wanted
%use the following command after \end{enumerate}
%\mybrace{a}{b}[Text comes here to describe these to items and justify for your
%case]]



\setcounter{secnumdepth}{2}

 %chapter format
\titleformat{\chapter}[display]%
  {\bfseries\Huge}% format applied to label+text
    {\begin{tikzpicture}
            \node[rectangle,fill=blue!55,text=white]{\fontsize{40}{50}\selectfont
            \thechapter} ;
\end{tikzpicture}}%label
  {0.5\baselineskip}% horizontal separation between label and title body
  {}% before the title body
  [{\color{blue!55}\titlerule[2pt]}]% after the title body

% section format
  \titleformat{\section}%
  {\normalfont\LARGE\bfseries\itshape\color{blue!55}}% format applied to label+text
  {\llap{\colorbox{blue!55}{\parbox{0.9cm}{\hfill\color{white}\thesection}}}}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  [] % after the title body 
% subsection format
\titleformat{\subsection}%
  {\normalfont\Large\bfseries\itshape\color{blue!55}}% format applied to label+text
  {\llap{\colorbox{blue!55}{\parbox{0.9cm}{\hfill\color{white}\thesubsection}}}}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body 

